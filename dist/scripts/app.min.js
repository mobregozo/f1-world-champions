!function(){'use strict';angular.module('f1WorldChampions',['ui.router','ncy-angular-breadcrumb','templates','f1WorldChampions.config','f1WorldChampions.driver','f1WorldChampions.home','f1WorldChampions.season','f1WorldChampions.sport','ui.bootstrap']).config(function($stateProvider,$urlRouterProvider){$stateProvider.state('app',{url:'/',abstract:!0,templateUrl:'navigation.html'}),$urlRouterProvider.otherwise('/home')})}(),angular.module("f1WorldChampions.config",[]).constant("config",{url:"http://ergast.com/api/f1/",format:".json"}),angular.module('templates',[]).run(['$templateCache',function($templateCache){$templateCache.put('navigation.html','<!-- Navigation -->\r\n<nav class="navbar navbar-default navbar-fixed-top">\r\n    <div class="container">\r\n        <div class="navbar-header">\r\n            <button ng-init="isNavCollapsed = true" type="button" class="navbar-toggle collapsed btn btn-navbar" ng-click="isNavCollapsed = !isNavCollapsed">\r\n                <span class="sr-only">Toggle navigation</span>\r\n                <span class="icon-bar"></span>\r\n                <span class="icon-bar"></span>\r\n                <span class="icon-bar"></span>\r\n            </button>\r\n            <!-- TEMPLATE LOGO -->\r\n            <div class="navbar-brand">\r\n                <a ui-sref="app.home">\r\n                    <img src="assets/images/f1_logo.svg" alt="img">\r\n                </a>\r\n            </div>\r\n        </div>\r\n        <div class="collapse navbar-collapse navbar-responsive-collapse" uib-collapse="isNavCollapsed">\r\n            <ul class="nav navbar-nav navbar-right">\r\n                <li ui-sref-active="active">\r\n                    <a ui-sref="app.home" ng-click="isNavCollapsed = !isNavCollapsed"><i class="fa fa-home" aria-hidden="true"></i>  HOME</a>\r\n                </li>\r\n                <li ui-sref-active="{active: \'app.season\'}">\r\n                    <a ui-sref="app.season.list" ng-click="isNavCollapsed = !isNavCollapsed"><i class="fa fa-calendar" aria-hidden="true"></i>  SEASONS</a>\r\n                </li>\r\n                <li ui-sref-active="{active: \'app.driver\'}">\r\n                    <a ui-sref="app.driver.list" ng-click="isNavCollapsed = !isNavCollapsed"><i class="fa fa-car" aria-hidden="true"></i> ALL TIME  DRIVERS</a>\r\n                </li>\r\n                <li ui-sref-active="active">\r\n                    <a ui-sref="app.sport" ng-click="isNavCollapsed = !isNavCollapsed"><i class="fa fa-info" aria-hidden="true"></i>  SPORT</a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</nav>\r\n<div class="container content-view">\r\n    <div ncy-breadcrumb class="radius-top"></div>\r\n    <div ui-view="content">\r\n    </div>\r\n</div>'),$templateCache.put('driver/driver.detail.html','<div class="padding-view header-row">\r\n    <h1>Driver Details</h1>\r\n</div>\r\n<div class="info-panel clearfix radius-bottom">\r\n    <div ng-if="!vm.loadedDriverInfo">\r\n        <div class="text-center">\r\n            <img class="loading-img" src="assets/images/loading.gif" alt="">\r\n        </div>\r\n    </div>\r\n    <div ng-if="vm.loadedDriverInfo">\r\n        <div class="col-xs-12 col-md-5 col-lg-6 color-black">\r\n            <div class="panel panel-default">\r\n                <div class="panel-heading">DRIVER BASIC INFORMATION</div>\r\n                <div class="panel-body">\r\n                    <h3><i class="fa fa-user"></i>&nbsp;&nbsp;{{vm.driverData.familyName}} , {{vm.driverData.givenName}}</h3>\r\n                    <h3><i class="fa fa-globe"></i>&nbsp;&nbsp;{{vm.driverData.nationality}}</h3>\r\n                    <h3><i class="fa fa-calendar"></i>&nbsp;&nbsp;{{vm.driverData.dateOfBirth}}</h3>\r\n                    <h3>\r\n                        <i class="fa fa-wikipedia-w"></i>&nbsp;&nbsp;\r\n                        <a class="link color-black" ng-href="{{vm.driverData.url}}" target="_blank">Read More</a>\r\n                    </h3>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put('driver/driver.html','<div ui-view="driver-content"></div>'),$templateCache.put('driver/driver.list.html','<div class="padding-view header-row">\r\n    <h1>ALL TIME DRIVER LIST</h1>\r\n</div>\r\n<div class="table-container">\r\n    <div ng-if="!vm.loadedResults">\r\n        <div class="text-center">\r\n            <img class="loading-img" src="assets/images/loading.gif" alt="">\r\n        </div>\r\n    </div>\r\n    <div ng-if="vm.loadedResults">\r\n        <table class="table table-hover table-responsive">\r\n            <thead>\r\n                <tr>\r\n                    <td>\r\n                        <i class="fa fa-user" aria-hidden="true"></i> Family Name\r\n                    </td>\r\n                    <td>\r\n                        Nationality\r\n                    </td>\r\n                    <td class="hidden-xs">\r\n                        Date of birth\r\n                    </td>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr ng-repeat="driver in vm.driverList track by $index" ui-sref="app.driver.detail({driverId:driver.familyName})">\r\n                    <td>{{driver.familyName}}, {{driver.givenName }}</td>\r\n                    <td>{{driver.nationality}}</td>\r\n                    <td class="hidden-xs">{{driver.dateOfBirth}}</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        <ul uib-pagination ng-change="vm.pageChange()" previous-text="&lsaquo;" next-text="&rsaquo;" total-items="vm.table.totalItems" ng-model="vm.table.currentPage" items-per-page="vm.table.size" max-size="5" class="pagination-sm" boundary-link-numbers="true"\r\n            rotate="false "></ul>\r\n    </div>\r\n</div>'),$templateCache.put('season/season.detail.html','<div ui-view="season-detail"></div>'),$templateCache.put('season/season.detail.race.html','<div class="padding-view header-row">\r\n    <h1>Round #{{vm.raceData.round}}</h1>\r\n</div>\r\n<div class="info-panel clearfix radius-bottom">\r\n    <div ng-if="!vm.loadedWinners">\r\n        <div class="text-center">\r\n            <img class="loading-img" src="assets/images/loading.gif" alt="">\r\n        </div>\r\n    </div>\r\n    <div ng-if="vm.loadedWinners">\r\n        <div class="col-xs-12 col-md-5 col-lg-6 color-black">\r\n            <div class="panel panel-default">\r\n                <div class="panel-heading">RACE INFORMATION</div>\r\n                <div class="panel-body">\r\n                    <h3><i class="fa fa-flag-checkered"></i>&nbsp;&nbsp;{{vm.raceData.raceName}}</h3>\r\n                    <h3><i class="fa fa-car"></i>&nbsp;&nbsp;{{vm.raceData.Circuit.circuitName}}</h3>\r\n                    <h3><i class="fa fa-globe"></i>&nbsp;&nbsp;{{vm.raceData.Circuit.Location.locality}}, {{vm.raceData.Circuit.Location.country}}</h3>\r\n                    <h3><i class="fa fa-calendar"></i>&nbsp;&nbsp;{{vm.raceData.date}}</h3>\r\n                    <h3>\r\n                        <i class="fa fa-wikipedia-w"></i>&nbsp;&nbsp;\r\n                        <a class="link color-black" ng-href="{{vm.raceData.Circuit.url}}" target="_blank">Find More Info</a>\r\n                    </h3>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="col-xs-12 col-md-7 col-lg-6">\r\n            <div class="panel panel-default">\r\n                <div class="panel-heading">RACE RESULTS</div>\r\n                <div class="panel-body">\r\n                    <form>\r\n                        <div class="form-group">\r\n                            <input type="text" class="form-control" placeholder="Search for a driver" ng-model="searchDriver">\r\n                        </div>\r\n                    </form>\r\n                    <table class="table table-responsive table-bordered ">\r\n                        <thead>\r\n                            <tr>\r\n                                <td>\r\n                                    <i class="fa fa-flag-checkered"></i> Position\r\n                                    <span ng-show="sortType == \'round\' && !sortReverse" class="order-caret fa fa-caret-down"></span>\r\n                                    <span ng-show="sortType == \'round\' && sortReverse" class="order-caret fa fa-caret-up"></span>\r\n                                </td>\r\n                                <td>\r\n                                    <a ng-click="sortType = \'familyName\'; sortReverse = !sortReverse">\r\n                                    Driver Name\r\n                                    <span ng-show="sortType == \'familyName\' && !sortReverse" class="order-caret fa fa-caret-down"></span>\r\n                                    <span ng-show="sortType == \'familyName\' && sortReverse" class="order-caret fa fa-caret-up"></span>\r\n                                </a>\r\n                                </td>\r\n                                <td class="hidden-xs">\r\n                                    <a ng-click="sortType = \'name\'; sortReverse = !sortReverse">\r\n                                    Constructor Name\r\n                                    <span ng-show="sortType == \'name\' && !sortReverse" class="order-caret fa fa-caret-down"></span>\r\n                                    <span ng-show="sortType == \'name\' && sortReverse" class="order-caret fa fa-caret-up"></span>\r\n                                </a>\r\n                                </td>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody class="color-black">\r\n                            <tr ng-repeat="driver in vm.raceData.Results | orderBy:sortType:sortReverse | filter:searchDriver">\r\n                                <td># {{driver.position}}</td>\r\n                                <td>{{driver.Driver.familyName}}, {{driver.Driver.givenName}} </td>\r\n                                <td class="hidden-xs">{{driver.Constructor.name}}</td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>'),$templateCache.put('season/season.detail.races.html','<div class="padding-view header-row">\r\n    <h1>SEASON {{vm.seasonSelected}} RACE WINNERS</h1>\r\n</div>\r\n<div class="input-row">\r\n    <form>\r\n        <div class="form-group">\r\n            <div class="input-group">\r\n                <div class="input-group-addon"><i class="fa fa-search"></i></div>\r\n                <input type="text" class="form-control" placeholder="Search for a winner or circuit" ng-model="searchRace">\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="table-container">\r\n    <div ng-if="!vm.loadedWinners && !vm.loadedChampion">\r\n        <div class="text-center">\r\n            <img class="loading-img" src="assets/images/loading.gif" alt="">\r\n        </div>\r\n    </div>\r\n    <table class="table table-hover table-responsive" ng-if="vm.loadedWinners && vm.loadedChampion">\r\n        <thead>\r\n            <tr>\r\n                <td>\r\n                    <a ng-click="vm.sortType = \'raceName\'; vm.sortReverse = !vm.sortReverse">\r\n                        <i class="fa fa-flag-checkered"></i> Round\r\n                        <span ng-show="vm.sortType == \'raceName\' && vm.sortReverse" class="order-caret fa fa-caret-down"></span>\r\n                        <span ng-show="vm.sortType == \'raceName\' && !vm.sortReverse" class="order-caret fa fa-caret-up"></span>\r\n                    </a>\r\n                </td>\r\n                <td class="hidden-xs">\r\n                    <a ng-click="vm.sortType = \'circuitName\'; vm.sortReverse = !vm.sortReverse">\r\n                        Ciurcuit\r\n                        <span ng-show="vm.sortType == \'circuitName\' && vm.sortReverse" class="order-caret fa fa-caret-down"></span>\r\n                        <span ng-show="vm.sortType == \'circuitName\' && !vm.sortReverse" class="order-caret fa fa-caret-up"></span>\r\n                    </a>\r\n                </td>\r\n                <td>\r\n                    <a ng-click="vm.sortType = \'familyName\'; vm.sortReverse = !vm.sortReverse">\r\n                        Driver Name\r\n                        <span ng-show="vm.sortType == \'familyName\' && vm.sortReverse" class="order-caret fa fa-caret-down"></span>\r\n                        <span ng-show="vm.sortType == \'familyName\' && !vm.sortReverse" class="order-caret fa fa-caret-up"></span>\r\n                    </a>\r\n                </td>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr ng-repeat="winner in vm.winnerList | orderBy:vm.sortOption:vm.sortReverse | filter:searchRace track by $index" ui-sref="app.season.detail.race({raceId:winner.round})">\r\n                <td># {{winner.round}} <span class="hidden-xs"> - {{winner.raceName}} </span></td>\r\n                <td class="hidden-xs">{{winner.Circuit.circuitName}} <span class="hidden-xs hidden-sm">({{winner.Circuit.Location.country}})</span></td>\r\n                <td> {{winner.Results[0].Driver.familyName}}, {{winner.Results[0].Driver.givenName}}\r\n                    <span class="badge pull-right" ng-if="winner.Results[0].Driver.code === vm.championDriver.code">&nbsp;<i class="fa fa-trophy" aria-hidden="true"></i>\r\n                    <span class="hidden-xs"> &nbsp;&nbsp;Season Champion</span> &nbsp;</span>\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n</div>'),$templateCache.put('season/season.html','<div ui-view="season-content"></div>'),$templateCache.put('season/season.list.html','<div class="padding-view header-row">\r\n    <h1>WORLD CHAMPIONS BY SEASON</h1>\r\n</div>\r\n<div class="input-row">\r\n    <form>\r\n        <div class="form-group">\r\n            <div class="input-group">\r\n                <div class="input-group-addon"><i class="fa fa-search"></i></div>\r\n                <input type="text" class="form-control" placeholder="Search for a season" ng-model="searchSeason">\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class="table-container">\r\n    <div ng-if="!vm.loadedResults">\r\n        <div class="text-center">\r\n            <img class="loading-img" src="assets/images/loading.gif" alt="">\r\n        </div>\r\n    </div>\r\n    <table ng-if="vm.loadedResults" class="table table-hover table-responsive">\r\n        <thead>\r\n            <tr>\r\n                <td>\r\n                    <a ng-click="vm.sortType = \'season\'; vm.sortReverse = !vm.sortReverse">\r\n                        <i class="fa fa-trophy" aria-hidden="true"></i> Season\r\n                        <span ng-show="vm.sortType == \'season\' && vm.sortReverse" class="order-caret fa fa-caret-down"></span>\r\n                        <span ng-show="vm.sortType == \'season\' && !vm.sortReverse" class="order-caret fa fa-caret-up"></span>\r\n                    </a>\r\n                </td>\r\n                <td>\r\n                    <a ng-click="vm.sortType = \'familyName\'; vm.sortReverse = !vm.sortReverse">\r\n                        Driver Name\r\n                        <span ng-show="vm.sortType == \'familyName\' && vm.sortReverse" class="order-caret fa fa-caret-down"></span>\r\n                        <span ng-show="vm.sortType == \'familyName\' && !vm.sortReverse" class="order-caret fa fa-caret-up"></span>\r\n                    </a>\r\n                </td>\r\n                <td class="hidden-xs">\r\n                    <a ng-click="vm.sortType = \'points\'; vm.sortReverse = !vm.sortReverse">\r\n                        Points\r\n                        <span ng-show="vm.sortType == \'points\' && vm.sortReverse" class="order-caret fa fa-caret-down"></span>\r\n                        <span ng-show="vm.sortType == \'points\' && !vm.sortReverse" class="order-caret fa fa-caret-up"></span>\r\n                    </a>\r\n                </td>\r\n                <td class="hidden-xs">\r\n                    <a ng-click="vm.sortType = \'wins\'; vm.sortReverse = !vm.sortReverse">\r\n                        Wins\r\n                        <span ng-show="vm.sortType == \'wins\' && vm.sortReverse" class="order-caret fa fa-caret-down"></span>\r\n                        <span ng-show="vm.sortType == \'wins\' && !vm.sortReverse" class="order-caret fa fa-caret-up"></span>\r\n                    </a>\r\n                </td>\r\n                <td class="hidden-xs">\r\n                    <a ng-click="vm.sortType = \'name\'; vm.sortReverse = !vm.sortReverse">\r\n                        Constructor\r\n                        <span ng-show="vm.sortType == \'name\' && vm.sortReverse" class="order-caret fa fa-caret-down"></span>\r\n                        <span ng-show="vm.sortType == \'name\' && !vm.sortReverse" class="order-caret fa fa-caret-up"></span>\r\n                    </a>\r\n                </td>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr ng-repeat="season in vm.seasonList | orderBy:vm.sortOption:vm.sortReverse  track by $index" ui-sref="app.season.detail.races({seasonId:season.season})">\r\n                <td>{{season.season}}</td>\r\n                <td>{{season.DriverStandings[0].Driver.familyName}}, {{season.DriverStandings[0].Driver.givenName }}</td>\r\n                <td class="hidden-xs">{{season.DriverStandings[0].points}}</td>\r\n                <td class="hidden-xs">{{season.DriverStandings[0].wins}}</td>\r\n                <td class="hidden-xs">{{season.DriverStandings[0].Constructors[0].name}}</td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n</div>'),$templateCache.put('home/home.html','<div class="padding-view header-row">\r\n    <h1>WELCOME TO THE F1 WORLD CHAMPIONSHIP PORTAL</h1>\r\n</div>\r\n<div class="info-panel radius-bottom">\r\n    <h3 class="color-black">\r\n        Since Formula One World Championship’s inception in 1950, the sport has Constantly pushing the technological boundaries in order to find the quickest route to victory.\r\n    </h3>\r\n    <br>\r\n    <div class="hidden-xs" uib-carousel active="vm.active" interval="vm.myInterval" no-wrap="vm.noWrapSlides">\r\n        <div uib-slide ng-repeat="img in vm.images" index="img.id">\r\n            <img ng-src="{{img.url}}" style="margin:auto;">\r\n            <div class="carousel-caption">\r\n                <h3>{{img.champion}} - Champion of the {{img.year}} Season</h3>\r\n                <br>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),$templateCache.put('sport/sport.html','<div class="padding-view header-row">\r\n    <h1>INFO</h1>\r\n</div>\r\n<div class="info-panel radius-bottom">\r\n    <h3 class="color-black text-justify">The FIA\'s involvement in motor sport is almost as old as the automobile itself. With city-to-city racing becoming popular in the early 20th century, but with no rules governing safety or fair competition, the Automobile Club de France allied itself\r\n        with 12 clubs from around the world to form the Association Internationales des Automobile Clubs Reconnus, the direct antecedent of the FIA. In 1950, the federation inaugurated the Formula One World Championship and thus began the FIA\'s evolution\r\n        into a global motor sports force. From Formula One to the World Rally Championship and from endurance racing to the brand new arena of alternative energy championships, the FIA\'s passion for motor sport and its dedication to ensuring fair play\r\n        and safety for all competitiors are undiminished.</h3>\r\n</div>')}]),function(){'use strict';function config($stateProvider){$stateProvider.state('app.home',{url:'home',views:{content:{templateUrl:'home/home.html',controller:'HomeCtrl',controllerAs:'vm'}},ncyBreadcrumb:{label:'Home'}})}angular.module('f1WorldChampions.home',[]).config(config).constant('carouselConfig',{IMAGES:[{url:'assets/images/champion_2005.jpg',champion:'Alonso',year:2005,id:0},{url:'assets/images/champion_2007.jpg',champion:'Räikkönen',year:2007,id:1},{url:'assets/images/champion_2008.jpg',champion:'Hamilton',year:2008,id:2},{url:'assets/images/champion_2009.jpg',champion:'Button',year:2009,id:3},{url:'assets/images/champion_2013.jpg',champion:'Vettel',year:2013,id:4},{url:'assets/images/champion_2015.jpg',champion:'Hamilton',year:2015,id:5}],INVERVAL:4e3}),config.$inject=['$stateProvider']}(),function(){'use strict';function HomeController(carouselConfig){var vm=this;vm.images=carouselConfig.IMAGES,vm.myInterval=carouselConfig.INVERVAL,vm.noWrapSlides=!1,vm.active=0}angular.module('f1WorldChampions.home').controller('HomeCtrl',HomeController),HomeController.$inject=['carouselConfig']}(),function(){'use strict';var config=['$stateProvider',function($stateProvider){$stateProvider.state('app.sport',{url:'sport',views:{content:{templateUrl:'sport/sport.html'}},ncyBreadcrumb:{label:'Sport Info'}})}];angular.module('f1WorldChampions.sport',[]).config(config)}(),function(){'use strict';function config($stateProvider){$stateProvider.state('app.driver',{url:'driver',abstract:!0,views:{content:{templateUrl:'driver/driver.html'}}}).state('app.driver.list',{url:'/list',views:{'driver-content':{templateUrl:'driver/driver.list.html',controller:'DriverListCtrl',controllerAs:'vm'}},ncyBreadcrumb:{label:'Driver List'}}).state('app.driver.detail',{url:'/:driverId',views:{'driver-content':{templateUrl:'driver/driver.detail.html',controller:'DriverDetailCtrl',controllerAs:'vm'}},ncyBreadcrumb:{label:'Driver {{vm.driverSelected}}',parent:'app.driver.list'}})}angular.module('f1WorldChampions.driver',[]).config(config).constant('driverLimit',{LIMIT:15}),config.$inject=['$stateProvider']}(),function(){'use strict';function dataservice($http,config,driverLimit){function getDrivers(page){function getDriversComplete(response){return{list:response.data.MRData.DriverTable.Drivers,total:response.data.MRData.total}}function getDriversFailed(error){console.error('XHR Failed for get Drivers List '+error.data)}var offsetCalc=Number(driverLimit.LIMIT)*Number(page);return $http.get(config.url+'drivers'+config.format,{params:{limit:driverLimit.LIMIT,offset:offsetCalc}}).then(getDriversComplete).catch(getDriversFailed)}function getDriverInfo(driverId){function getDriverInfoComplete(response){return response.data.MRData.DriverTable.Drivers[0]}function getDriverInfoFailed(error){console.error('XHR Failed for get Driver Info'+error.data)}return $http.get(config.url+'drivers/'+driverId+config.format).then(getDriverInfoComplete).catch(getDriverInfoFailed)}return{getDrivers:getDrivers,getDriverInfo:getDriverInfo}}angular.module('f1WorldChampions.driver').factory('driverService',dataservice),dataservice.$inject=['$http','config','driverLimit']}(),function(){'use strict';function DriverListController(driverService,driverLimit){function activate(){return getDrivers()}function pageChange(){vm.loadedResults=!1,getDrivers()}function getDrivers(){return driverService.getDrivers(vm.table.currentPage).then(function(data){vm.driverList=data.list,vm.table.totalItems=Number(data.total),vm.loadedResults=!0})}var vm=this;vm.driverList=[],vm.loadedResults=!1,vm.table={currentPage:1,offset:0,totalItems:0,size:driverLimit.LIMIT},vm.getDrivers=getDrivers(),vm.pageChange=pageChange,activate()}function DriverDetailController(driverService,$stateParams,$http){function activate(){getDriverInfo()}function getDriverInfo(){return driverService.getDriverInfo($stateParams.driverId).then(function(data){vm.driverData=data,vm.loadedDriverInfo=!0})}var vm=this;vm.driverSelected=$stateParams.driverId,vm.driverData={},vm.loadedDriverInfo=!1,vm.getDriverInfo=getDriverInfo,activate()}angular.module('f1WorldChampions.driver').controller('DriverListCtrl',DriverListController),angular.module('f1WorldChampions.driver').controller('DriverDetailCtrl',DriverDetailController),DriverListController.$inject=['driverService','driverLimit'],DriverDetailController.$inject=['driverService','$stateParams','$http']}(),function(){'use strict';function config($stateProvider){$stateProvider.state('app.season',{url:'season',abstract:!0,views:{content:{templateUrl:'season/season.html'}}}).state('app.season.list',{url:'/list',views:{'season-content':{templateUrl:'season/season.list.html',controller:'SeasonListCtrl',controllerAs:'vm'}},ncyBreadcrumb:{label:'Season Champions'}}).state('app.season.detail',{url:'/:seasonId',views:{'season-content':{templateUrl:'season/season.detail.html'}}}).state('app.season.detail.races',{url:'/races',views:{'season-detail':{templateUrl:'season/season.detail.races.html',controller:'SeasonRacesCtrl',controllerAs:'vm'}},ncyBreadcrumb:{parent:'app.season.list',label:'Races'}}).state('app.season.detail.race',{url:'/:raceId',views:{'season-detail':{templateUrl:'season/season.detail.race.html',controller:'SeasonRaceCtrl',controllerAs:'vm'}},ncyBreadcrumb:{parent:'app.season.detail.races',label:'Race {{vm.raceSelected}}'}})}angular.module('f1WorldChampions.season',[]).config(config).constant('seasonLimit',{FROM:55,LIMIT:11}),config.$inject=['$stateProvider']}(),function(){'use strict';function dataservice($http,config,seasonLimit){function getSeasons(){function getSeasonsComplete(response){return response.data.MRData.StandingsTable.StandingsLists}function getSeasonsFailed(error){console.error('XHR Failed for get Season '+error.data)}return $http.get(config.url+'driverStandings/1'+config.format,{params:{offset:seasonLimit.FROM,limit:seasonLimit.LIMIT}}).then(getSeasonsComplete).catch(getSeasonsFailed)}function getSeasonWinners(seasonYear){function getSeasonWinnersComplete(response){return response.data.MRData.RaceTable.Races}function getSeasonWinnersFailed(error){console.error('XHR Failed for get Season Winners'+error.data)}return $http.get(config.url+seasonYear+'/results/1'+config.format).then(getSeasonWinnersComplete).catch(getSeasonWinnersFailed)}function getSeasonChampion(seasonYear){function getSeasonChampionComplete(response){return response.data.MRData.StandingsTable.StandingsLists[0].DriverStandings[0].Driver}function getSeasonChampionFailed(error){console.error('XHR Failed for get Season Champion'+error.data)}return $http.get(config.url+seasonYear+'/driverStandings/1'+config.format).then(getSeasonChampionComplete).catch(getSeasonChampionFailed)}function getRaceData(seasonYear,roundNumber){function getRaceDataComplete(response){return response.data.MRData.RaceTable.Races[0]}function getRaceDataFailed(error){console.error('XHR Failed for get Race Winners'+error.data)}return $http.get(config.url+seasonYear+'/'+roundNumber+'/results'+config.format).then(getRaceDataComplete).catch(getRaceDataFailed)}return{getSeasons:getSeasons,getSeasonChampion:getSeasonChampion,getSeasonWinners:getSeasonWinners,getRaceData:getRaceData}}angular.module('f1WorldChampions.season').factory('seasonService',dataservice),dataservice.$inject=['$http','config','seasonLimit']}(),function(){'use strict';function SeasonListController(seasonService){function sortOption(item){switch(vm.sortType){case'points':return Number(item.DriverStandings[0].points);case'wins':return Number(item.DriverStandings[0].wins);case'familyName':return item.DriverStandings[0].Driver.familyName;case'name':return item.DriverStandings[0].Constructors[0].name;default:return item.raceName}}function activate(){return getSeasons()}function getSeasons(){return seasonService.getSeasons().then(function(data){vm.seasonList=data,vm.loadedResults=!0})}var vm=this;vm.seasonList=[],vm.loadedResults=!1,vm.sortType='season',vm.sortReverse=!1,vm.sortOption=sortOption,activate()}function SeasonRacesController(seasonService,$stateParams,$http){function activate(){getWinners(),getChampion()}function sortOption(item){switch(vm.sortType){case'raceName':return item.raceName;case'circuitName':return item.Circuit.circuitName;case'familyName':return item.Results[0].Driver.familyName;default:return item.raceName}}function getWinners(){return seasonService.getSeasonWinners($stateParams.seasonId).then(function(data){vm.winnerList=data,vm.loadedWinners=!0})}function getChampion(){return seasonService.getSeasonChampion($stateParams.seasonId).then(function(data){vm.championDriver=data,vm.loadedChampion=!0})}var vm=this;vm.seasonSelected=$stateParams.seasonId,vm.championDriver={},vm.winnerList=[],vm.loadedWinners=!1,vm.loadedChampion=!1,vm.sortType='raceName',vm.sortReverse=!1,vm.getWinners=getWinners,vm.getChampion=getChampion,vm.sortOption=sortOption,activate()}function SeasonRaceController(seasonService,$stateParams,$http,$sce){function activate(){getRaceData()}function getRaceData(){return seasonService.getRaceData($stateParams.seasonId,$stateParams.raceId).then(function(data){vm.raceData=data,vm.loadedWinners=!0})}var vm=this;vm.raceSelected=$stateParams.raceId,vm.raceData=[],vm.loadedWinners=!1,vm.getRaceData=getRaceData,activate()}angular.module('f1WorldChampions.season').controller('SeasonListCtrl',SeasonListController),angular.module('f1WorldChampions.season').controller('SeasonRacesCtrl',SeasonRacesController),angular.module('f1WorldChampions.season').controller('SeasonRaceCtrl',SeasonRaceController),SeasonListController.$inject=['seasonService'],SeasonRacesController.$inject=['seasonService','$stateParams','$http'],SeasonRaceController.$inject=['seasonService','$stateParams','$http','$sce']}();